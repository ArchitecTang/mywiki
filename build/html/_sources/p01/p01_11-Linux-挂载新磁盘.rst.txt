.. contents::
   :depth: 3
..

1.11 Linux下挂载新磁盘
======================

需求：新增加一块硬盘sdb，只分一个区，格式化挂载到/date

1.11.1 查看现在已有的分区状态
-----------------------------

df -h |df.png|

图中显示没有看到sdb硬盘

1.11.2 查看服务器安装的硬盘状态（包括格式化和未格式化的）
---------------------------------------------------------

fdisk -l |fdi.png|

图中显示，有sdb硬盘，但是没有分区

1.11.3 添加新分区
-----------------

fdisk /dev/sdb |添加磁盘.png| 按照以下红框输入：

N 回车 P 回车 1 回车 两次回车 W 回车

用以下命令查看分区

fdisk -l |查看分区.png| 图中红框显示已经多出了一个分区，但是没有格式化

1.11.4 格式化分区
-----------------

mkfs -t ext4 -c /dev/sdb1 |格式化分区.png| -t
指定要把磁盘格式化成什么类型

-c 在建立文件系统之前检查坏道，可能会很费时间，新硬盘一般不需要

1.11.5 挂载新硬盘
-----------------

在根目录下建一个文件夹，待会将分区挂载在这个文件夹上，以后要往新硬盘存东西，就放在这个新建的文件夹里就可以
mkdir /data

挂载硬盘

mount /dev/sdb1 /data |挂载磁盘.png|

1.11.6 让系统开机自动挂载这块硬盘
---------------------------------

echo “/dev/sdb1 /data ext4 defaults 0 0”> /etc/fstab
|查看挂载后分区.png| —

.. |df.png| image:: https://i.loli.net/2019/07/12/5d2839079c76674098.png
.. |fdi.png| image:: https://i.loli.net/2019/07/12/5d28394e2aac122932.png
.. |添加磁盘.png| image:: https://i.loli.net/2019/07/12/5d2839759c55d71148.png
.. |查看分区.png| image:: https://i.loli.net/2019/07/12/5d2839a2251f217270.png
.. |格式化分区.png| image:: https://i.loli.net/2019/07/12/5d2839d1d5e2079315.png
.. |挂载磁盘.png| image:: https://i.loli.net/2019/07/12/5d2839fbb2c1224987.png
.. |查看挂载后分区.png| image:: https://i.loli.net/2019/07/12/5d283a357c51424911.png
